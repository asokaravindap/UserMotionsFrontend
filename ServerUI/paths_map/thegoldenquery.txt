SELECT a.mac, a.lat, a.lon, a.timestamp FROM sensorreadings AS a WHERE (SELECT COUNT(*) FROM sensorreadings AS b WHERE b.mac = a.mac AND b.timestamp >= a.timestamp) <= 2 ORDER BY a.mac ASC, a.timestamp DESC